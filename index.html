<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Melania</title>
  <style>
    :root {
      --bg: #f5f5f7;
      --card: #fff;
      --accent: #0071e3;
      --muted: #86868b;
      --border: #e5e5ea;
      --green: #22c55e;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: #1d1d1f;
      background: var(--bg);
    }
    .container {
      max-width: 420px;
      margin: 0 auto;
      padding: 32px 8px 32px 8px;
      box-sizing: border-box;
    }
    .card {
      background: var(--card);
      border-radius: 24px;
      box-shadow: 0 2px 8px rgba(60,60,67,0.07);
      padding: 28px 20px;
      margin-bottom: 28px;
      border: 1px solid var(--border);
      transition: box-shadow 0.2s;
    }
    .card:hover {
      box-shadow: 0 8px 32px rgba(60,60,67,0.10);
    }
    .header {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-bottom: 18px;
    }
    .header-emoji {
      font-size: 48px;
    }
    .header-info {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .header-title {
      font-size: 26px;
      font-weight: 600;
      margin: 0;
      letter-spacing: -0.5px;
    }
    .header-sub {
      font-size: 15px;
      color: var(--muted);
      margin-top: 2px;
    }
    .header-age {
      font-size: 16px;
      color: var(--accent);
      margin-top: 4px;
    }
    .days-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
    }
    .days-table td {
      padding: 10px;
      text-align: center;
      min-width: 32px;
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —á–µ–∫–±–æ–∫—Å–æ–≤ */
    input.custom-checkbox {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
      width: 22px;
      height: 22px;
      border-radius: 6px;
      border: 2px solid var(--border);
      background: #fff;
      cursor: pointer;
      position: relative;
      transition: background 0.2s, border-color 0.2s;
      vertical-align: middle;
    }
    input.custom-checkbox:checked {
      border-color: var(--green);
      background: var(--green);
    }
    input.custom-checkbox:checked::after {
      content: '';
      position: absolute;
      left: 5px;
      top: 2px;
      width: 7px;
      height: 12px;
      border: solid #fff;
      border-width: 0 3px 3px 0;
      transform: rotate(45deg);
      pointer-events: none;
    }

    input.custom-checkbox:disabled {
      cursor: default;
      opacity: 0.6;
    }

    @media (max-width: 500px) {
      .container { padding: 16px 2px 16px 2px; }
      .card { padding: 14px 6px; margin-bottom: 14px; }
      .header-title { font-size: 20px; }
      .days-table td { padding: 6px 2px; min-width: 24px;}
      input.custom-checkbox { width: 18px; height: 18px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <div class="header-emoji">üéâ</div>
        <div class="header-info">
          <div class="header-title">–ú–µ–ª–∞–Ω–∏—è</div>
          <div class="header-sub">–î–µ–≤–æ—á–∫–∞, 24 –∏—é–ª—è 2025</div>
          <div class="header-age" id="ageDisplay">–í–æ–∑—Ä–∞—Å—Ç: –µ—â—ë –Ω–µ —Ä–æ–¥–∏–ª–∞—Å—å</div>
        </div>
      </div>
      <table class="days-table" aria-label="–î–Ω–∏ –∂–∏–∑–Ω–∏">
        <tbody id="daysTableBody"></tbody>
      </table>
      <div style="display:flex; justify-content:center; align-items:center; margin-top:24px;">
        <canvas id="lifePieChart" width="120" height="120" aria-label="–î–∏–∞–≥—Ä–∞–º–º–∞ –∂–∏–∑–Ω–∏" role="img"></canvas>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const birthDate = new Date('2025-07-24T18:51:00');
    const ageDisplay = document.getElementById('ageDisplay');
    const daysTableBody = document.getElementById('daysTableBody');
    const daysInMonth = 31;

    function updateAgeDisplay() {
      const now = new Date();
      const diffMs = now - birthDate;
      if (diffMs < 0) {
        ageDisplay.textContent = '–í–æ–∑—Ä–∞—Å—Ç: –µ—â—ë –Ω–µ —Ä–æ–¥–∏–ª–∞—Å—å';
        return;
      }
      const diffMins = Math.floor(diffMs / 60000);
      const days = Math.floor(diffMins / (60 * 24));
      const hours = Math.floor((diffMins % (60 * 24)) / 60);
      const minutes = diffMins % 60;
      ageDisplay.textContent = `–í–æ–∑—Ä–∞—Å—Ç: ${days} –¥–Ω. ${hours} —á. ${minutes} –º–∏–Ω.`;
    }

    function renderDaysTable() {
      daysTableBody.innerHTML = '';
      const today = new Date();
      let row = null;

      for (let i = 1; i <= daysInMonth; i++) {
        if ((i - 1) % 7 === 0) {
          row = document.createElement('tr');
          daysTableBody.appendChild(row);
        }

        const dayDate = new Date(birthDate);
        dayDate.setDate(birthDate.getDate() + i - 1);

        const isChecked = today >= dayDate;

        const cell = document.createElement('td');
        const checkbox = document.createElement('input');
        checkbox.type = 'checkbox';
        checkbox.className = 'custom-checkbox';
        checkbox.id = `day-${i}`;
        checkbox.checked = isChecked;
        checkbox.disabled = true; // —á—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ –º–µ–Ω—è—Ç—å –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî —É–±—Ä–∞—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É

        cell.appendChild(checkbox);
        row.appendChild(cell);
      }
    }

    function renderPieChart() {
      const now = new Date();
      let livedDays = Math.max(0, Math.floor((now - birthDate) / (1000 * 60 * 60 * 24)));
      if (livedDays > daysInMonth) livedDays = daysInMonth;

      const ctx = document.getElementById('lifePieChart').getContext('2d');

      if (window.lifeChart) {
        window.lifeChart.destroy();
      }

      const gradient = ctx.createLinearGradient(0, 0, 0, 200);
      gradient.addColorStop(0, '#34d399');
      gradient.addColorStop(1, '#059669');

      window.lifeChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          datasets: [{
            data: [livedDays, daysInMonth - livedDays],
            backgroundColor: [
              gradient,
              'rgba(229,229,234,0.3)'
            ],
            borderWidth: 0,
            borderRadius: 20,
            cutout: '80%'
          }]
        },
        options: {
          responsive: false,
          plugins: {
            legend: { display: false },
            tooltip: { enabled: false },
            title: { display: false }
          }
        }
      });
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    updateAgeDisplay();
    renderDaysTable();
    renderPieChart();

    setInterval(() => {
      updateAgeDisplay();
      renderPieChart();
    }, 60000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
  </script>
</body>
</html>
